<!DOCTYPE html>
<html lang="es">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Registro - Cuah-Quick</title>
Â  Â  <style>
Â  Â  Â  Â  /* ======================================= */
Â  Â  Â  Â  /* DEFINICIÃ“N DE COLORES CONSISTENTES */
Â  Â  Â  Â  /* ======================================= */
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  --primary: #3498db; /* Azul Principal (UCQ) */
Â  Â  Â  Â  Â  Â  --secondary: #2ecc71; /* Verde Acento (Ã‰xito) */
Â  Â  Â  Â  Â  Â  --pure-black: #000000; /* Fondo: Negro Puro */
Â  Â  Â  Â  Â  Â  --card-bg: #1a1a1a; /* Fondo de Tarjeta/Formulario */
Â  Â  Â  Â  Â  Â  --light-text: #f5f5f5; /* Texto Blanco/Claro */
Â  Â  Â  Â  Â  Â  --subtle-text: #a0a0a0; /* Texto secundario gris */
Â  Â  Â  Â  Â  Â  --input-bg: #2c3e50; /* Fondo de Input (mÃ¡s oscuro que la tarjeta) */
Â  Â  Â  Â  Â  Â  --shadow-color: rgba(0, 0, 0, 0.9);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* ======================================= */
Â  Â  Â  Â  /* BASE Y ANIMACIONES */
Â  Â  Â  Â  /* ======================================= */
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
Â  Â  Â  Â  Â  Â  background-color: var(--pure-black); /* Fondo Negro Puro */
Â  Â  Â  Â  Â  Â  color: var(--light-text);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* AnimaciÃ³n de entrada profesional (la misma que en login.html) */
Â  Â  Â  Â  @keyframes fadeInScale {
Â  Â  Â  Â  Â  Â  from { opacity: 0; transform: scale(0.95); }
Â  Â  Â  Â  Â  Â  to { opacity: 1; transform: scale(1); }
Â  Â  Â  Â  }

Â  Â  Â  Â  /* ======================================= */
Â  Â  Â  Â  /* CONTENEDOR CENTRAL DEL FORMULARIO */
Â  Â  Â  Â  /* ======================================= */
Â  Â  Â  Â  .register-container {
Â  Â  Â  Â  Â  Â  background: var(--card-bg);
Â  Â  Â  Â  Â  Â  padding: 40px;
Â  Â  Â  Â  Â  Â  border-radius: 12px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 30px var(--shadow-color);
Â  Â  Â  Â  Â  Â  width: 90%;
Â  Â  Â  Â  Â  Â  max-width: 450px; /* Un poco mÃ¡s ancho por la cantidad de campos */
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  animation: fadeInScale 0.8s ease-out; /* Aplica la animaciÃ³n */
Â  Â  Â  Â  Â  Â  border-top: 5px solid var(--secondary); /* Acento verde para el registro (Ã©xito) */
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* TÃ­tulo del formulario */
Â  Â  Â  Â  h2 {
Â  Â  Â  Â  Â  Â  font-size: 2em;
Â  Â  Â  Â  Â  Â  color: var(--secondary); /* TÃ­tulo verde */
Â  Â  Â  Â  Â  Â  margin-bottom: 30px;
Â  Â  Â  Â  Â  Â  border-bottom: 2px solid var(--secondary);
Â  Â  Â  Â  Â  Â  padding-bottom: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* ======================================= */
Â  Â  Â  Â  /* ELEMENTOS DEL FORMULARIO */
Â  Â  Â  Â  /* ======================================= */
Â  Â  Â  Â  input {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  Â  Â  margin: 10px 0;
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  Â  Â  border: 1px solid #444;Â 
Â  Â  Â  Â  Â  Â  border-radius: 6px;
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  Â  Â  background-color: var(--input-bg);
Â  Â  Â  Â  Â  Â  color: var(--light-text);
Â  Â  Â  Â  Â  Â  transition: border-color 0.3s ease;
Â  Â  Â  Â  }

Â  Â  Â  Â  input:focus {
Â  Â  Â  Â  Â  Â  border-color: var(--primary); /* Acento azul al enfocar */
Â  Â  Â  Â  Â  Â  outline: none;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* BotÃ³n de Registrar */
Â  Â  Â  Â  #registerButton {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  Â  Â  margin-top: 20px;
Â  Â  Â  Â  Â  Â  background-color: var(--primary); /* BotÃ³n azul (UCQ) */
Â  Â  Â  Â  Â  Â  color: var(--card-bg);
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  font-size: 1.1em;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  border-radius: 50px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 10px rgba(52, 152, 219, 0.4);
Â  Â  Â  Â  }

Â  Â  Â  Â  #registerButton:hover {
Â  Â  Â  Â  Â  Â  background-color: #2980b9;
Â  Â  Â  Â  Â  Â  transform: translateY(-2px);
Â  Â  Â  Â  Â  Â  box-shadow: 0 6px 15px rgba(52, 152, 219, 0.6);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Enlace de login y mensajes */
Â  Â  Â  Â  p {
Â  Â  Â  Â  Â  Â  margin-top: 25px;
Â  Â  Â  Â  Â  Â  color: var(--subtle-text);
Â  Â  Â  Â  }
Â  Â  Â  Â  p a {
Â  Â  Â  Â  Â  Â  color: var(--secondary); /* Enlace verde */
Â  Â  Â  Â  Â  Â  text-decoration: none;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  transition: color 0.3s;
Â  Â  Â  Â  }
Â  Â  Â  Â  p a:hover {
Â  Â  Â  Â  Â  Â  color: #58d68d;
Â  Â  Â  Â  }
Â  Â  Â  Â  #message {
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  margin-top: 15px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .register-icon {
Â  Â  Â  Â  Â  Â  font-size: 3em;
Â  Â  Â  Â  Â  Â  color: var(--primary);
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>

Â  Â  <div class="register-container">
Â  Â  Â  Â  <div class="register-icon">ğŸ“</div>
Â  Â  Â  Â  <h2>Crear Cuenta de Estudiante</h2>
Â  Â  Â  Â  <form id="registerForm">
Â  Â  Â  Â  Â  Â  <input type="text" id="full_name" placeholder="Nombre Completo" required>
Â  Â  Â  Â  Â  Â  <input type="email" id="email" placeholder="Correo ElectrÃ³nico (Solo Escolar)" required>
Â  Â  Â  Â  Â  Â  <input type="password" id="password" placeholder="ContraseÃ±a" required>
Â  Â  Â  Â  Â  Â  <input type="tel" id="phone" placeholder="TelÃ©fono (10 dÃ­gitos)" required>
Â  Â  Â  Â  Â  Â  <input type="text" id="student_id" placeholder="MatrÃ­cula Estudiantil" required>Â 
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <button type="submit" id="registerButton">Registrar mi Cuenta</button>
Â  Â  Â  Â  </form>
Â  Â  Â  Â  <p>Â¿Ya tienes cuenta? <a href="login.html">Inicia SesiÃ³n aquÃ­</a></p>
Â  Â  Â  Â  <p id="message"></p>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  // =========================================================================
Â  Â  Â  Â  // CORRECCIÃ“N CLAVE: URL de la API de Render
Â  Â  Â  Â  // =========================================================================
Â  Â  Â  Â  const API_BASE_URL = 'https://backend-cuah-quick-api.onrender.com/api'; // URL CORRECTA
Â  Â  Â  Â Â 
Â  Â  Â  Â  const registerForm = document.getElementById('registerForm');
Â  Â  Â  Â  const registerButton = document.getElementById('registerButton');
Â  Â  Â  Â  const messageDisplay = document.getElementById('message');

Â  Â  Â  Â  registerForm.addEventListener('submit', handleRegister);

Â  Â  Â  Â  async function handleRegister(e) {
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  registerButton.disabled = true;
Â  Â  Â  Â  Â  Â  messageDisplay.textContent = 'Registrando...';
Â  Â  Â  Â  Â  Â  messageDisplay.style.color = '#f39c12'; // Naranja temporal

Â  Â  Â  Â  Â  Â  const userData = {
Â  Â  Â  Â  Â  Â  Â  Â  full_name: document.getElementById('full_name').value,
Â  Â  Â  Â  Â  Â  Â  Â  email: document.getElementById('email').value,
Â  Â  Â  Â  Â  Â  Â  Â  password: document.getElementById('password').value,
Â  Â  Â  Â  Â  Â  Â  Â  phone: document.getElementById('phone').value,
Â  Â  Â  Â  Â  Â  Â  Â  role: 'client',Â 
Â  Â  Â  Â  Â  Â  Â  Â  student_id: document.getElementById('student_id').value
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  // La URL de la API es ahora la de Render.
Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch(`${API_BASE_URL}/register`, {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify(userData)
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const data = await response.json();

Â  Â  Â  Â  Â  Â  Â  Â  if (response.status === 201) {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // CORRECCIÃ“N: Usar color directo en JS
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  messageDisplay.textContent = 'âœ… Registro exitoso. SerÃ¡s redirigido para iniciar sesiÃ³n.';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  messageDisplay.style.color = '#2ecc71'; // Verde (Color de --secondary)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Limpiar formulario al Ã©xito
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  registerForm.reset(); 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.location.href = 'login.html';Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }, 2000);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  messageDisplay.textContent = `âŒ Error: ${data.message || 'Verifica los datos.'}`;Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  messageDisplay.style.color = '#e74c3c'; // Rojo
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error('Error de conexiÃ³n:', error);
Â  Â  Â  Â  Â  Â  Â  Â  // Este error de conexiÃ³n es el que se mostrarÃ­a si falla el CORS o la red.
Â  Â  Â  Â  Â  Â  Â  Â  messageDisplay.textContent = 'ğŸš¨ Error de red/conexiÃ³n con el servidor. Revisa la consola (F12) para detalles.';
Â  Â  Â  Â  Â  Â  Â  Â  messageDisplay.style.color = '#e74c3c'; // Rojo
Â  Â  Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  Â  Â  registerButton.disabled = false;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  </script>
</body>
</html>
