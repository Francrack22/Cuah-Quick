<!DOCTYPE html>
<html lang="es">
<head>
ย ย <meta charset="UTF-8">
ย ย <meta name="viewport" content="width=device-width, initial-scale=1.0">
ย ย <title>Registro - Cuah-Quick</title>
ย ย 
    ย ย <style>
ย ย ย ย /* ======================================= */
ย ย ย ย /* DEFINICIรN DE COLORES CONSISTENTES */
ย ย ย ย /* ======================================= */
ย ย ย ย :root {
ย ย ย ย ย ย --primary: #3498db; /* Azul Principal (UCQ) */
ย ย ย ย ย ย --secondary: #2ecc71; /* Verde Acento (รxito) */
ย ย ย ย ย ย --pure-black: #000000; /* Fondo: Negro Puro */
ย ย ย ย ย ย --card-bg: #1a1a1a; /* Fondo de Tarjeta/Formulario */
ย ย ย ย ย ย --light-text: #f5f5f5; /* Texto Blanco/Claro */
ย ย ย ย ย ย --subtle-text: #a0a0a0; /* Texto secundario gris */
ย ย ย ย ย ย --input-bg: #2c3e50; /* Fondo de Input (mรกs oscuro que la tarjeta) */
ย ย ย ย ย ย --shadow-color: rgba(0, 0, 0, 0.9);
ย ย ย ย }

ย ย ย ย /* ======================================= */
ย ย ย ย /* BASE Y ANIMACIONES */
ย ย ย ย /* ======================================= */
ย ย ย ย body {
ย ย ย ย ย ย font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
ย ย ย ย ย ย background-color: var(--pure-black);
ย ย ย ย ย ย color: var(--light-text);
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย flex-direction: column;
ย ย ย ย ย ย justify-content: center;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย min-height: 100vh;
ย ย ย ย ย ย margin: 0;
ย ย ย ย ย ย padding: 20px;
ย ย ย ย }

ย ย ย ย /* Animaciรณn de entrada profesional */
ย ย ย ย @keyframes fadeInScale {
ย ย ย ย ย ย from { opacity: 0; transform: scale(0.95); }
ย ย ย ย ย ย to { opacity: 1; transform: scale(1); }
ย ย ย ย }

ย ย ย ย /* ======================================= */
ย ย ย ย /* CONTENEDOR CENTRAL DEL FORMULARIO */
ย ย ย ย /* ======================================= */
ย ย ย ย .register-container {
ย ย ย ย ย ย background: var(--card-bg);
ย ย ย ย ย ย padding: 40px;
ย ย ย ย ย ย border-radius: 12px;
ย ย ย ย ย ย box-shadow: 0 10px 30px var(--shadow-color);
ย ย ย ย ย ย width: 90%;
ย ย ย ย ย ย max-width: 450px;
ย ย ย ย ย ย text-align: center;
ย ย ย ย ย ย animation: fadeInScale 0.8s ease-out;
ย ย ย ย ย ย border-top: 5px solid var(--secondary);
ย ย ย ย }
ย ย ย ยย
ย ย ย ย /* Tรญtulo del formulario */
ย ย ย ย h2 {
ย ย ย ย ย ย font-size: 2em;
ย ย ย ย ย ย color: var(--primary); /* Tรญtulo azul, como en la imagen */
ย ย ย ย ย ย margin-bottom: 30px;
ย ย ย ย ย ย border-bottom: 2px solid var(--primary);
ย ย ย ย ย ย padding-bottom: 10px;
ย ย ย ย }

ย ย ย ย /* ======================================= */
ย ย ย ย /* ESTILOS DE INPUTS Y BOTรN */
ย ย ย ย /* ======================================= */
ย ย ย ย input {
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย padding: 15px;
ย ย ย ย ย ย margin: 10px 0;
ย ย ย ย ย ย display: inline-block;
ย ย ย ย ย ย border: 1px solid #444;ย
ย ย ย ย ย ย border-radius: 6px;
ย ย ย ย ย ย box-sizing: border-box;
ย ย ย ย ย ย background-color: var(--input-bg);
ย ย ย ย ย ย color: var(--light-text);
ย ย ย ย ย ย transition: border-color 0.3s ease;
ย ย ย ย }

ย ย ย ย input:focus {
ย ย ย ย ย ย border-color: var(--primary);
ย ย ย ย ย ย outline: none;
ย ย ย ย }

ย ย ย ย /* Botรณn de Registrar (Estilo mรกs "apretado" y brillante como la imagen) */
ย ย ย ย #registerButton {
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย padding: 15px;
ย ย ย ย ย ย margin-top: 20px;
ย ย ย ย ย ย background-color: var(--secondary); /* Fondo Verde de รxito */
ย ย ย ย ย ย color: var(--card-bg); /* Texto oscuro para contraste */
ย ย ย ย ย ย font-weight: bold;
ย ย ย ย ย ย font-size: 1.1em;
ย ย ย ย ย ย border: none;
ย ย ย ย ย ย border-radius: 50px;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย transition: all 0.3s ease;
ย ย ย ย ย ย box-shadow: 0 4px 10px rgba(46, 204, 113, 0.6); /* Sombra verde mรกs fuerte */
ย ย ย ย }

ย ย ย ย #registerButton:hover {
ย ย ย ย ย ย background-color: #27ae60; /* Verde mรกs oscuro al pasar el ratรณn */
ย ย ย ย ย ย transform: translateY(-2px);
ย ย ย ย ย ย box-shadow: 0 6px 15px rgba(46, 204, 113, 0.8);
ย ย ย ย }

ย ย ย ย /* Enlace de login y mensajes */
ย ย ย ย p {
ย ย ย ย ย ย margin-top: 25px;
ย ย ย ย ย ย color: var(--subtle-text);
ย ย ย ย }
ย ย ย ย p a {
ย ย ย ย ย ย color: var(--primary); /* Enlace Azul */
ย ย ย ย ย ย text-decoration: none;
ย ย ย ย ย ย font-weight: 600;
ย ย ย ย ย ย transition: color 0.3s;
ย ย ย ย }
ย ย ย ย p a:hover {
ย ย ย ย ย ย color: #5dade2;
ย ย ย ย }
ย ย ย ย #message {
ย ย ย ย ย ย font-weight: bold;
ย ย ย ย ย ย margin-top: 15px;
ย ย ย ย }
        /* รcono de la llave */
ย ย ย ย .register-icon {
ย ย ย ย ย ย font-size: 3em;
ย ย ย ย ย ย margin-bottom: 10px;
            /* Usar emoji de llave para replicar la imagen */
ย ย ย ย }
ย ย </style>
</head>
<body>

    ย ย <div class="register-container">
        ย ย ย ย <div class="register-icon">๐</div> 
ย ย ย ย <h2>Crear Cuenta de Estudiante</h2>
ย ย ย ย <form id="registerForm">
ย ย ย ย ย ย <input type="text" id="full_name" placeholder="Nombre Completo" required>
ย ย ย ย ย ย <input type="email" id="email" placeholder="Correo Electrรณnico (UCQ)" required>
ย ย ย ย ย ย <input type="password" id="password" placeholder="Contraseรฑa" required>
ย ย ย ย ย ย <input type="tel" id="phone" placeholder="Telรฉfono (10 dรญgitos)" required>
ย ย ย ย ย ย <input type="text" id="student_id" placeholder="Matrรญcula Estudiantil" required>ย
ย ย ย ย ย ยย
ย ย ย ย ย ย <button type="submit" id="registerButton">Registrar mi Cuenta</button>
ย ย ย ย </form>
ย ย ย ย <p>ยฟYa tienes cuenta? <a href="login.html">Inicia Sesiรณn</a></p>
ย ย ย ย <p id="message"></p>
ย ย </div>

    ย ย <script>
ย ย ย ย // La URL de tu API de Render, crucial para que las peticiones funcionen.
ย ย ย ย const API_BASE_URL = 'https://backend-cuah-quick-api.onrender.com/api'; 
ย ย ย ยย
ย ย ย ย const registerForm = document.getElementById('registerForm');
ย ย ย ย const registerButton = document.getElementById('registerButton');
ย ย ย ย const messageDisplay = document.getElementById('message');

ย ย ย ย registerForm.addEventListener('submit', handleRegister);

ย ย ย ย async function handleRegister(e) {
ย ย ย ย ย ย e.preventDefault();
ย ย ย ย ย ยย
ย ย ย ย ย ย registerButton.disabled = true;
ย ย ย ย ย ย messageDisplay.textContent = 'Registrando...';
ย ย ย ย ย ย messageDisplay.style.color = '#f39c12'; // Naranja: Procesando

ย ย ย ย ย ย const userData = {
ย ย ย ย ย ย ย ย full_name: document.getElementById('full_name').value,
ย ย ย ย ย ย ย ย email: document.getElementById('email').value,
ย ย ย ย ย ย ย ย password: document.getElementById('password').value,
ย ย ย ย ย ย ย ย phone: document.getElementById('phone').value,
ย ย ย ย ย ย ย ย role: 'client',ย
ย ย ย ย ย ย ย ย student_id: document.getElementById('student_id').value
ย ย ย ย ย ย };

ย ย ย ย ย ย try {
ย ย ย ย ย ย ย ย // Peticiรณn al backend de Render
ย ย ย ย ย ย ย ย const response = await fetch(`${API_BASE_URL}/register`, {
ย ย ย ย ย ย ย ย ย ย method: 'POST',
ย ย ย ย ย ย ย ย ย ย headers: { 'Content-Type': 'application/json' },
ย ย ย ย ย ย ย ย ย ย body: JSON.stringify(userData)
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย const data = await response.json();

ย ย ย ย ย ย ย ย if (response.status === 201) {ย
ย ย ย ย ย ย ย ย ย ย messageDisplay.textContent = 'โ ยกRegistro exitoso! Serรกs redirigido para iniciar sesiรณn.';
ย ย ย ย ย ย ย ย ย ย messageDisplay.style.color = '#2ecc71'; // Verde de รxito
ย ย ย ย ย ย ย ย ย ย 
ย ย ย ย ย ย ย ย ย ย registerForm.reset(); // Limpia los campos
ย ย ย ย ย ย ย ย ย ย setTimeout(() => {
ย ย ย ย ย ย ย ย ย ย ย ย window.location.href = 'login.html';ย
ย ย ย ย ย ย ย ย ย ย }, 2000);
ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย ย ย messageDisplay.textContent = `โ Error: ${data.message || 'Error desconocido. Verifica los datos.'}`;ย
ย ย ย ย ย ย ย ย ย ย messageDisplay.style.color = '#e74c3c'; // Rojo de Error
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย } catch (error) {
ย ย ย ย ย ย ย ย console.error('Error de conexiรณn/red:', error);
ย ย ย ย ย ย ย ย messageDisplay.textContent = '๐จ ยกFallo de Conexiรณn! Asegรบrate de que la API de Render estรฉ activa.';
ย ย ย ย ย ย ย ย messageDisplay.style.color = '#e74c3c';
ย ย ย ย ย ย } finally {
ย ย ย ย ย ย ย ย registerButton.disabled = false;
ย ย ย ย ย ย }
ย ย ย ย }
ย ย </script>
</body>
</html>
